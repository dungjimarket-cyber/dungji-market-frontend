# 백엔드 비밀번호 재설정 API 요구사항

## 필요한 API 엔드포인트

### 1. `/auth/verify-user-phone/` (POST)
**목적**: 아이디와 휴대폰 번호가 일치하는 사용자 확인

**요청 형식**:
```json
{
  "username": "사용자아이디",
  "phone_number": "01012345678"  // 하이픈 없이
}
```

**성공 응답 (200 OK)**:
```json
{
  "success": true,
  "message": "사용자 확인 성공"
}
```

**실패 응답 (400 또는 404)**:
```json
{
  "success": false,
  "message": "일치하는 사용자 정보를 찾을 수 없습니다"
}
```

### 2. `/auth/reset-password-phone/` (POST)
**목적**: 휴대폰 인증 완료 후 비밀번호 변경

**요청 형식 (백엔드 실제 요구사항)**:
```json
{
  "user_id": "사용자ID또는username",
  "phone_number": "01012345678",  // 하이픈 없이
  "verification_code": "123456",  // 휴대폰 인증코드
  "new_password": "새비밀번호"
}
```

**성공 응답 (200 OK)**:
```json
{
  "success": true,
  "message": "비밀번호가 성공적으로 변경되었습니다"
}
```

**실패 응답**:
```json
{
  "success": false,
  "message": "비밀번호 변경에 실패했습니다"
}
```

## 백엔드 구현 체크리스트

### 1. 사용자 확인 API (`/auth/verify-user-phone/`)
- [ ] username과 phone_number 필드 검증
- [ ] 데이터베이스에서 두 조건이 모두 일치하는 사용자 조회
- [ ] 일치하는 사용자가 없으면 `success: false` 반환
- [ ] 일치하는 사용자가 있으면 `success: true` 반환
- [ ] DB 오류 시 적절한 에러 메시지 반환

### 2. 비밀번호 재설정 API (`/auth/reset-password-phone/`)
- [ ] username과 phone_number로 사용자 재확인
- [ ] new_password 필드 검증 (최소 8자, 영문+숫자 포함)
- [ ] 비밀번호 해시화 처리
- [ ] 데이터베이스에 새 비밀번호 저장
- [ ] 성공 시 `success: true` 반환
- [ ] 실패 시 구체적인 에러 메시지와 함께 `success: false` 반환

## 비밀번호 검증 규칙
프론트엔드에서 적용하는 규칙과 동일하게:
- 최소 8자 이상
- 영문 포함 (대소문자 구분 없음)
- 숫자 포함
- 특수문자는 선택사항

## 보안 고려사항
1. **Rate Limiting**: 무차별 대입 공격 방지를 위한 요청 제한
2. **로깅**: 비밀번호 재설정 시도 기록
3. **검증**: 휴대폰 인증이 완료된 경우에만 비밀번호 변경 허용
4. **해시화**: bcrypt 또는 유사한 안전한 해시 알고리즘 사용

## 테스트 시나리오
1. 올바른 아이디와 휴대폰 번호로 사용자 확인
2. 잘못된 조합으로 사용자 확인 실패
3. 유효한 비밀번호로 재설정 성공
4. 짧은 비밀번호로 재설정 실패
5. 영문/숫자 누락된 비밀번호로 재설정 실패

## 현재 프론트엔드 동작
1. 사용자가 아이디와 휴대폰 번호 입력
2. `/auth/verify-user-phone/`로 확인 요청
3. 성공 시 휴대폰 인증 단계로 이동
4. 인증 완료 후 새 비밀번호 입력
5. `/auth/reset-password-phone/`로 비밀번호 변경 요청
6. 성공 시 로그인 페이지로 리다이렉트

## 디버깅 정보
브라우저 콘솔에서 다음 정보 확인 가능:
- 사용자 확인 요청 데이터
- API 응답 상태 코드
- 응답 데이터 전체
- 비밀번호 재설정 요청 데이터